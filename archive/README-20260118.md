# T480 control-plane lab

This repo defines the ThinkPad T480 as the **control-plane workstation** for a small Fedora/RHEL lab, with an Fedora Asahi-based server as the primary services and data hub. It is designed to demonstrate **senior-level, interview-defensible** Linux infrastructure, not just working configs.

## Lab overview

- T480: daily-driver workstation and control plane (Ansible, CI control, documentation).
- Asahi server (`srv-m1m`): main services and data node (Forgejo, Woodpecker, PostgreSQL, Prometheus/Grafana, Vaultwarden, etc.).
- Other nodes (raspi4, containers, cloud backups) hang off this pair as supporting infrastructure.

For a detailed map of hosts, services, and data flows, see `ARCHITECTURE.md`.

## Repo layout

Core directories under `infra/t480`:

- `ansible/` – playbooks, inventories, and roles for T480 and the wider lab.
- `runbooks/` – operational procedures (backup/restore, networking, security, systemd, etc.).
- `ADR/` – architecture decision records for non-trivial choices.
- `audits/` – system audit outputs and summarized system specs.
- `ci/` – CI configuration and helper scripts for validating this repo.
- `scripts/` – local helper scripts (e.g., audit and system-spec collection).
- `t480-system/` – T480-specific system description and specs.
- `troubleshoot/` – troubleshooting notes and structured investigations.

For machine-readable context (especially for AI tools), see `repo.md`.

## How to use this repo

- Treat this repo as the **single source of truth** for T480’s role in the lab and its automation.
- Capture any repeatable operational work as:
  - a `runbooks/RUNBOOK-*.md` entry, and
  - automation in `ansible/` or scripts where appropriate.
- Record non-obvious design or tradeoff decisions in `ADR/`.

Day-to-day, work from T480, commit to this repo, and use it to drive changes out to the Asahi server and other nodes.

## Governance

The rules for how to work in this repo, how to use AI, and how to evolve the lab are defined in `T480-CHARTER.md`. That charter is the governing law for this project.

## Current state

- Baseline T480 audits and system specs are captured under `audits/` and `t480-system/`.
- Core runbooks for common Linux operational tasks are populated in `runbooks/`.
- CI, Terraform, and some Ansible structures are placeholders and will be filled in as the lab grows.

## What’s next

Near-term priorities:

- Establish baseline Ansible for T480 self-management and connectivity to the Asahi server.
- Define and implement Forgejo and CI workflows originating from T480.
- Solidify backup and restore paths for both T480 and the Asahi server.
- Expand monitoring and logging coverage, with T480 as the primary operational console.
- Evolve `ARCHITECTURE.md` and `T480-CHARTER.md` as the lab architecture and workflows mature.

