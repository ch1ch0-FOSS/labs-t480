# Architecture Diagrams

This directory contains architecture visualizations for the T480 control plane.

## Network Architecture

```
┌─────────────────────────────────────────────────────────────────────┐
│                         Tailscale Network                           │
│                         100.0.0.0/8                                │
└─────────────────────────────────────────────────────────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        │                     │                     │
        ▼                     ▼                     ▼
┌───────────────┐    ┌───────────────┐    ┌───────────────┐
│     T480      │    │   srv-m1m    │    │   External   │
│  Control      │◄──►│    Data      │    │    Hosts     │
│   Plane       │    │    Plane     │    │ (laptop,    │
│               │    │               │    │   phone)     │
│ 100.127.184.81│    │100.104.206.96│    │              │
└───────────────┘    └───────────────┘    └───────────────┘
```

## System Architecture

```
┌─────────────────────────────────────────────────────────────────────┐
│                         T480 Workstation                            │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐           │
│  │   Sway      │    │   Neovim    │    │    tmux     │           │
│  │  (Desktop)  │    │  (Editor)   │    │ (Terminal)  │           │
│  └─────────────┘    └─────────────┘    └─────────────┘           │
│                                                                     │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐           │
│  │  Ansible   │    │  OpenCode   │    │   Beads    │           │
│  │ (IaC)      │    │   (AI)      │    │  (Tasks)   │           │
│  └──────┬──────┘    └──────┬──────┘    └─────────────┘           │
│         │                   │                                     │
│         └─────────┬─────────┘                                     │
│                   ▼                                               │
│         ┌─────────────────┐                                       │
│         │   Tailscale    │                                       │
│         │    (VPN)       │                                       │
│         └────────┬────────┘                                       │
│                  │                                                │
└──────────────────┼────────────────────────────────────────────────┘
                   │
                   ▼
          ┌────────────────┐
          │    srv-m1m    │
          │  (Data Plane) │
          └────────────────┘
```

## Ansible Architecture

```
┌─────────────────────────────────────────────────────────────────────┐
│                    ~/iac (Infrastructure Code)                      │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   playbooks/                    roles/                             │
│   ├── workstation.yml    ───►  ├── t480-golden-v2/               │
│   ├── monitoring.yml           ├── devtools/                      │
│   ├── deploy-forgejo.yml      ├── ssh-hardening/                  │
│   └── ...                      ├── node-exporter/                 │
│                                  ├── ... (20+ roles)               │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

## Data Flow

```
User Action → SSH/Tailscale → Ansible → srv-m1m Services
                                        │
                    ┌───────────────────┼───────────────────┐
                    ▼                   ▼                   ▼
              Forgejo             Prometheus            Vaultwarden
             (Git/CI)            (Metrics)            (Secrets)
```
